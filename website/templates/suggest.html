{% extends 'base.html' %}
{% block content %}

{% if user.is_authenticated %}

{% if response %}
<pre>
<code class='line-numbers language-{{lang}}'>
{{response}}

</code>
</pre>

<br /><br />




<form method=POST action="{% url 'suggest' %}">
	{% csrf_token %}


	<div class="selectform">
	<select class="form-select" name="lang">
		<option selected>Select Programming Language</option>
		{% for lang in lang_list %}

		<option value="{{ lang }}">{{ lang }}</option>

		{% endfor %}
	</select>
	</div>
	<br/>

	<div class="input-group-textarea">
		<div style="padding: 0px 50px 0px 50px;">
			<textarea class="form-control" id="myTextarea" name="code" placeholder="A.I. Suggest Code"
				oninput="adjustTextareaHeight(this)">{{ code }}</textarea>
			<div class="icon-wrapper">
				<button type="submit" class="btn btn-secondary"><i class="fas fa-paper-plane fa-lg"></i></button>
			</div>
		</div>
	</div>

</form>
<br />








{% else %}


<pre>
<code class='line-numbers language-python'>
if name == "Rahil":
	print("Hello Rahil!")
else:
	print("Hello Friend")
</code>
</pre>

<br>
<div class="instruction">&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Powered By OpenAI<br>
	• Limited knowledge of world and events after 2021<br>
	• May occasionally generate incorrect information<br>
	• Remembers what user said earlier in the conversation
</div>





<form method=POST action="{% url 'suggest' %}">
	{% csrf_token %}
	<div class="selectform">
	<select class="form-select" name="lang">
		<option selected>Select Programming Language</option>
		{% for lang in lang_list %}

		<option value="{{ lang }}">{{ lang }}</option>

		{% endfor %}
	</select>
	</div>
	<br />

	<div class="input-group-textarea">
		<div style="padding: 0px 50px 0px 50px;">
			<textarea class="form-control" id="myTextarea" name="code" placeholder="A.I. Suggest Code"
				oninput="adjustTextareaHeight(this)"></textarea>
			<div class="icon-wrapper">
				<button type="submit" class="btn btn-secondary"><i class="fas fa-paper-plane fa-lg"></i></button>
			</div>
		</div>
	</div>

</form>
<br />
{% endif %}

{% else %}

<div class="col-md-6 offset-md-3">
	<h1>Login</h1>
	<br />
	<form method="POST" action="{% url 'login' %}">
		{% csrf_token %}
		<div class="form-group">
			<input type="text" class="form-control" placeholder="Enter Username" name="username">
			<br />
		</div>
		<div class="form-group">
			<input type="password" class="form-control" placeholder="Enter Password" name="password">
		</div>
		<br />

		<button type="submit" class="btn btn-secondary">Login</button>
	</form>
</div>
{% endif %}

{% endblock %}